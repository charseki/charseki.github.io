<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Charseki&#39;s Blog</title>
  
  <subtitle>慢慢的，你总会发现，你的努力没有白费。</subtitle>
  <link href="https://www.chenshengkai.com/atom.xml" rel="self"/>
  
  <link href="https://www.chenshengkai.com/"/>
  <updated>2020-12-16T07:19:27.151Z</updated>
  <id>https://www.chenshengkai.com/</id>
  
  <author>
    <name>Charseki</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Kali Linux 2020.4 替换BurpSuite Pro 1.7.37</title>
    <link href="https://www.chenshengkai.com/2020/12/16/Kali-Linux-2020-4-%E6%9B%BF%E6%8D%A2BurpSuite-Pro-1-7-37/"/>
    <id>https://www.chenshengkai.com/2020/12/16/Kali-Linux-2020-4-%E6%9B%BF%E6%8D%A2BurpSuite-Pro-1-7-37/</id>
    <published>2020-12-16T06:42:22.000Z</published>
    <updated>2020-12-16T07:19:27.151Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kali-Linux-2020-4-替换BurpSuite-Pro-1-7-37"><a href="#Kali-Linux-2020-4-替换BurpSuite-Pro-1-7-37" class="headerlink" title="Kali Linux 2020.4 替换BurpSuite Pro 1.7.37"></a>Kali Linux 2020.4 替换BurpSuite Pro 1.7.37</h1><h3 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h3><p>新出的kail linux 2020.4自带的burpsuite是社区版的，通过此贴记录升级过程。</p><h3 id="BP破解"><a href="#BP破解" class="headerlink" title="BP破解"></a>BP破解</h3><p>1、先删除自带的社区版burpsuite</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /usr/bin/burpsuite</span><br></pre></td></tr></table></figure><p>2、然后在/usr/bin下面新建一个burp文件夹，把两个jar包都放到这里。</p><p>3、运行破解补丁包 burp-loader-keygen.jar</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar burp-loader-keygen.jar</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201216145424.png" alt="image-20201216145420403"></p><p>点击界面上的“Run”，进入程序安装界面。</p><p>把License复制到里面–&gt;Next–&gt;选择Manual activation–&gt;</p><p>Copy request到Activation Request里面，得到Activation Response–&gt;</p><p>点击程序里的Paste response–&gt;Next–&gt;完成安装。</p><p><strong>升级过程很简单，不做过多介绍。</strong></p><a id="more"></a><h3 id="修改快捷方式"><a href="#修改快捷方式" class="headerlink" title="修改快捷方式"></a>修改快捷方式</h3><p>1、确保jdk已经切换到1.8版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-alternatives  --config  java</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201216150725.png" alt="image-20201216150721971"></p><p>2、vim新建一个文件burpsuite，内容为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">java -Xbootclasspath/p:/usr/bin/burp/burp-loader-keygen.jar -jar /usr/bin/burp/burpsuite_pro_v1.7.37.jar</span><br></pre></td></tr></table></figure><p>3、保存退出，增加执行权限。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /usr/bin/burpsuite</span><br></pre></td></tr></table></figure><p>4、进入/usr/share/applications，并编辑burpsuite的快捷方式</p><p>修改内容如下：</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201216151148.png" alt="image-20201216151143914"></p><p>把原来的：Exec=sh -c “java -jar /usr/bin/burpsuite” 改为 Exec=sh -c “/usr/bin/burpsuite”</p><p>5、然后就可以使用桌面的快捷方式启动BurpSuite了</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201216151343.png" alt="image-20201216151340947"></p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201216151414.png" alt="image-20201216151406810"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Kali-Linux-2020-4-替换BurpSuite-Pro-1-7-37&quot;&gt;&lt;a href=&quot;#Kali-Linux-2020-4-替换BurpSuite-Pro-1-7-37&quot; class=&quot;headerlink&quot; title=&quot;Kali Linux 2020.4 替换BurpSuite Pro 1.7.37&quot;&gt;&lt;/a&gt;Kali Linux 2020.4 替换BurpSuite Pro 1.7.37&lt;/h1&gt;&lt;h3 id=&quot;背景介绍&quot;&gt;&lt;a href=&quot;#背景介绍&quot; class=&quot;headerlink&quot; title=&quot;背景介绍&quot;&gt;&lt;/a&gt;背景介绍&lt;/h3&gt;&lt;p&gt;新出的kail linux 2020.4自带的burpsuite是社区版的，通过此贴记录升级过程。&lt;/p&gt;
&lt;h3 id=&quot;BP破解&quot;&gt;&lt;a href=&quot;#BP破解&quot; class=&quot;headerlink&quot; title=&quot;BP破解&quot;&gt;&lt;/a&gt;BP破解&lt;/h3&gt;&lt;p&gt;1、先删除自带的社区版burpsuite&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rm -rf /usr/bin/burpsuite&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;2、然后在/usr/bin下面新建一个burp文件夹，把两个jar包都放到这里。&lt;/p&gt;
&lt;p&gt;3、运行破解补丁包 burp-loader-keygen.jar&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;java -jar burp-loader-keygen.jar&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201216145424.png&quot; alt=&quot;image-20201216145420403&quot;&gt;&lt;/p&gt;
&lt;p&gt;点击界面上的“Run”，进入程序安装界面。&lt;/p&gt;
&lt;p&gt;把License复制到里面–&amp;gt;Next–&amp;gt;选择Manual activation–&amp;gt;&lt;/p&gt;
&lt;p&gt;Copy request到Activation Request里面，得到Activation Response–&amp;gt;&lt;/p&gt;
&lt;p&gt;点击程序里的Paste response–&amp;gt;Next–&amp;gt;完成安装。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;升级过程很简单，不做过多介绍。&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Kali Linux" scheme="https://www.chenshengkai.com/categories/Kali-Linux/"/>
    
    
    <category term="BurpSuite" scheme="https://www.chenshengkai.com/tags/BurpSuite/"/>
    
  </entry>
  
  <entry>
    <title>Kali Linux 安装JDK8</title>
    <link href="https://www.chenshengkai.com/2020/12/16/Kali-Linux-%E5%AE%89%E8%A3%85JDK8/"/>
    <id>https://www.chenshengkai.com/2020/12/16/Kali-Linux-%E5%AE%89%E8%A3%85JDK8/</id>
    <published>2020-12-16T03:05:29.000Z</published>
    <updated>2020-12-16T07:19:16.551Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kali-Linux-安装JDK8"><a href="#Kali-Linux-安装JDK8" class="headerlink" title="Kali Linux 安装JDK8"></a>Kali Linux 安装JDK8</h1><h3 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h3><p>自带的jdk版本太高，有些软件不兼容，所以打算卸载，重新安装jdk1.8</p><h3 id="下载解压"><a href="#下载解压" class="headerlink" title="下载解压"></a>下载解压</h3><p>自行去Oracle官网下载JDK1.8</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /usr/<span class="built_in">local</span>/java</span><br><span class="line">sudo cp jdk-8u161-linux-x64.tar.gz /usr/<span class="built_in">local</span>/java</span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/java</span><br><span class="line">sudo tar -zxvf jdk-8u91-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br><span class="line"><span class="comment">### JDK Environment</span></span><br><span class="line">JAVA_HOME=/usr/<span class="built_in">local</span>/java/jdk1.8.0_161</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME</span><br><span class="line"><span class="built_in">export</span> PATH</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="通知系统java的位置"><a href="#通知系统java的位置" class="headerlink" title="通知系统java的位置"></a>通知系统java的位置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --install <span class="string">&quot;/usr/bin/java&quot;</span> <span class="string">&quot;java&quot;</span> <span class="string">&quot;/usr/local/java/jdk1.8.0_161/bin/java&quot;</span> 1</span><br><span class="line">sudo update-alternatives --install <span class="string">&quot;/usr/bin/javac&quot;</span> <span class="string">&quot;javac&quot;</span> <span class="string">&quot;/usr/local/java/jdk1.8.0_161/bin/javac&quot;</span> 1</span><br><span class="line">sudo update-alternatives --install <span class="string">&quot;/usr/bin/javaws&quot;</span> <span class="string">&quot;javaws&quot;</span> <span class="string">&quot;/usr/local/java/jdk1.8.0_161/bin/javaws&quot;</span> 1</span><br><span class="line">sudo update-alternatives --install <span class="string">&quot;/usr/bin/javaws&quot;</span> <span class="string">&quot;javaws&quot;</span> <span class="string">&quot;/usr/local/java/jdk1.8.0_161/bin/javaws&quot;</span> 1</span><br></pre></td></tr></table></figure><h3 id="设置默认JDK"><a href="#设置默认JDK" class="headerlink" title="设置默认JDK"></a>设置默认JDK</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --<span class="built_in">set</span> java /usr/<span class="built_in">local</span>/java/jdk1.8.0_161/bin/java</span><br><span class="line">sudo update-alternatives --<span class="built_in">set</span> javac /usr/<span class="built_in">local</span>/java/jdk1.8.0_161/bin/javac</span><br><span class="line">sudo update-alternatives --<span class="built_in">set</span> javaws /usr/<span class="built_in">local</span>/java/jdk1.8.0_161/bin/javaws</span><br></pre></td></tr></table></figure><h3 id="重载profile"><a href="#重载profile" class="headerlink" title="重载profile"></a>重载profile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h3 id="验证JDK"><a href="#验证JDK" class="headerlink" title="验证JDK"></a>验证JDK</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201216110221.png" alt="image-20201216110212117"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Kali-Linux-安装JDK8&quot;&gt;&lt;a href=&quot;#Kali-Linux-安装JDK8&quot; class=&quot;headerlink&quot; title=&quot;Kali Linux 安装JDK8&quot;&gt;&lt;/a&gt;Kali Linux 安装JDK8&lt;/h1&gt;&lt;h3 id=&quot;背景介绍&quot;&gt;&lt;a href=&quot;#背景介绍&quot; class=&quot;headerlink&quot; title=&quot;背景介绍&quot;&gt;&lt;/a&gt;背景介绍&lt;/h3&gt;&lt;p&gt;自带的jdk版本太高，有些软件不兼容，所以打算卸载，重新安装jdk1.8&lt;/p&gt;
&lt;h3 id=&quot;下载解压&quot;&gt;&lt;a href=&quot;#下载解压&quot; class=&quot;headerlink&quot; title=&quot;下载解压&quot;&gt;&lt;/a&gt;下载解压&lt;/h3&gt;&lt;p&gt;自行去Oracle官网下载JDK1.8&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo mkdir -p /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/java&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo cp jdk-8u161-linux-x64.tar.gz /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/java&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/java&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo tar -zxvf jdk-8u91-linux-x64.tar.gz&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;配置环境变量&quot;&gt;&lt;a href=&quot;#配置环境变量&quot; class=&quot;headerlink&quot; title=&quot;配置环境变量&quot;&gt;&lt;/a&gt;配置环境变量&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo vim /etc/profile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;### JDK Environment&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_HOME=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/java/jdk1.8.0_161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PATH=&lt;span class=&quot;variable&quot;&gt;$PATH&lt;/span&gt;:&lt;span class=&quot;variable&quot;&gt;$HOME&lt;/span&gt;/bin:&lt;span class=&quot;variable&quot;&gt;$JAVA_HOME&lt;/span&gt;/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; JAVA_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; PATH&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Kali Linux" scheme="https://www.chenshengkai.com/categories/Kali-Linux/"/>
    
    
    <category term="JDK8" scheme="https://www.chenshengkai.com/tags/JDK8/"/>
    
  </entry>
  
  <entry>
    <title>Zabbix4.0网页汉化</title>
    <link href="https://www.chenshengkai.com/2020/12/06/Zabbix%E7%BD%91%E9%A1%B5%E6%B1%89%E5%8C%96/"/>
    <id>https://www.chenshengkai.com/2020/12/06/Zabbix%E7%BD%91%E9%A1%B5%E6%B1%89%E5%8C%96/</id>
    <published>2020-12-06T15:24:00.000Z</published>
    <updated>2020-12-06T15:57:18.204Z</updated>
    
    <content type="html"><![CDATA[<h1 id="007-Zabbix网页汉化实战"><a href="#007-Zabbix网页汉化实战" class="headerlink" title="007-Zabbix网页汉化实战"></a>007-Zabbix网页汉化实战</h1><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a><strong>背景介绍</strong></h2><p>Zabbix网页在设置成中文后，监测-&gt;图形里的监控图形会有乱码的产生。</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206232540.png"></p><p> 修改文中文后，出现乱码的情况。</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206232609.png"></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a><strong>正文</strong></h2><p>解决zabbix部分乱码的情况。</p><h3 id="下载微软雅黑字体"><a href="#下载微软雅黑字体" class="headerlink" title="下载微软雅黑字体"></a>下载微软雅黑字体</h3><p>网盘链接: <a href="https://pan.baidu.com/s/1C40EzFfgOFWYCcepTUMeMQ">https://pan.baidu.com/s/1C40EzFfgOFWYCcepTUMeMQ</a>  密码: 0951</p><a id="more"></a><h3 id="字体的存放目录"><a href="#字体的存放目录" class="headerlink" title="字体的存放目录"></a>字体的存放目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/nginx/html/zabbix/fonts</span><br></pre></td></tr></table></figure><h3 id="上传微软雅黑字体"><a href="#上传微软雅黑字体" class="headerlink" title="上传微软雅黑字体"></a>上传微软雅黑字体</h3><h3 id="字体配置修改"><a href="#字体配置修改" class="headerlink" title="字体配置修改"></a>字体配置修改</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/<span class="built_in">local</span>/nginx/html/zabbix/include/defines.inc.php</span><br></pre></td></tr></table></figure><p>默认是DejaVuSans字体，改成msyh微软雅黑字体</p><h3 id="验证乱码问题是否解决"><a href="#验证乱码问题是否解决" class="headerlink" title="验证乱码问题是否解决"></a>验证乱码问题是否解决</h3><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206232958.png"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;007-Zabbix网页汉化实战&quot;&gt;&lt;a href=&quot;#007-Zabbix网页汉化实战&quot; class=&quot;headerlink&quot; title=&quot;007-Zabbix网页汉化实战&quot;&gt;&lt;/a&gt;007-Zabbix网页汉化实战&lt;/h1&gt;&lt;h2 id=&quot;背景介绍&quot;&gt;&lt;a href=&quot;#背景介绍&quot; class=&quot;headerlink&quot; title=&quot;背景介绍&quot;&gt;&lt;/a&gt;&lt;strong&gt;背景介绍&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;Zabbix网页在设置成中文后，监测-&amp;gt;图形里的监控图形会有乱码的产生。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206232540.png&quot;&gt;&lt;/p&gt;
&lt;p&gt; 修改文中文后，出现乱码的情况。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206232609.png&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;正文&quot;&gt;&lt;a href=&quot;#正文&quot; class=&quot;headerlink&quot; title=&quot;正文&quot;&gt;&lt;/a&gt;&lt;strong&gt;正文&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;解决zabbix部分乱码的情况。&lt;/p&gt;
&lt;h3 id=&quot;下载微软雅黑字体&quot;&gt;&lt;a href=&quot;#下载微软雅黑字体&quot; class=&quot;headerlink&quot; title=&quot;下载微软雅黑字体&quot;&gt;&lt;/a&gt;下载微软雅黑字体&lt;/h3&gt;&lt;p&gt;网盘链接: &lt;a href=&quot;https://pan.baidu.com/s/1C40EzFfgOFWYCcepTUMeMQ&quot;&gt;https://pan.baidu.com/s/1C40EzFfgOFWYCcepTUMeMQ&lt;/a&gt;  密码: 0951&lt;/p&gt;</summary>
    
    
    
    <category term="Linux运维" scheme="https://www.chenshengkai.com/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="Zabbix" scheme="https://www.chenshengkai.com/tags/Zabbix/"/>
    
  </entry>
  
  <entry>
    <title>Zabbix4.0版本编译安装</title>
    <link href="https://www.chenshengkai.com/2020/12/06/Zabbix%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/"/>
    <id>https://www.chenshengkai.com/2020/12/06/Zabbix%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/</id>
    <published>2020-12-06T15:09:42.000Z</published>
    <updated>2020-12-06T15:23:36.877Z</updated>
    
    <content type="html"><![CDATA[<h1 id="006-Zabbix4-0版本编译安装"><a href="#006-Zabbix4-0版本编译安装" class="headerlink" title="006-Zabbix4.0版本编译安装"></a>006-Zabbix4.0版本编译安装</h1><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a><strong>正文</strong></h2><h3 id="Zabbix源码编译安装"><a href="#Zabbix源码编译安装" class="headerlink" title="Zabbix源码编译安装"></a>Zabbix源码编译安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># zabbix的一些依赖包安装</span></span><br><span class="line">yum install -y libevent-devel wget tar gcc gcc-c++ make net-snmp-devel libxml2-devel libcurl-devel</span><br><span class="line"><span class="comment"># 创建启动进程的用户zabbix</span></span><br><span class="line">useradd -s /sbin/nologin zabbix</span><br><span class="line"><span class="comment"># zaibbx的tar下载</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src/</span><br><span class="line">wget https://nchc.dl.sourceforge.net/project/zabbix/ZABBIX Latest Stable/4.0.3/zabbix-4.0.3.tar.gz</span><br><span class="line"><span class="comment"># 解压zabbix的tar包</span></span><br><span class="line">tar -zxvf zabbix-4.0.3.tar.gz</span><br><span class="line"><span class="built_in">cd</span> zabbix-4.0.3</span><br><span class="line"><span class="comment"># zabbix编译安装</span></span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/zabbix --enable-server --enable-agent --with-mysql=/usr/<span class="built_in">local</span>/mysql/bin/mysql_config --with-net-snmp --with-libcurl --with-libxml2</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="Zabbix编译参数说明"><a href="#Zabbix编译参数说明" class="headerlink" title="Zabbix编译参数说明"></a>Zabbix编译参数说明</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--prefix 指定安装的目录</span><br><span class="line">--enable-server 安装zabbix-server</span><br><span class="line">--enable-agent 安装zabbix-agent</span><br><span class="line">--with-mysql 用mysql来进行存储</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="Zabbix-server的安装验证"><a href="#Zabbix-server的安装验证" class="headerlink" title="Zabbix server的安装验证"></a>Zabbix server的安装验证</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 环境变量设置</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/zabbix/sbin/:/usr/<span class="built_in">local</span>/zabbix/bin/</span><br><span class="line"><span class="comment"># 查看版本:</span></span><br><span class="line">zabbix_server --version</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206231230.png"></p><h3 id="Zabbix-server的启动"><a href="#Zabbix-server的启动" class="headerlink" title="Zabbix server的启动"></a>Zabbix server的启动</h3><p>1.需要到mysql里做数据库初始化<br>2.配置zabbix server<br>3.启动zabbix server</p><h3 id="Mysql数据库初始化"><a href="#Mysql数据库初始化" class="headerlink" title="Mysql数据库初始化"></a>Mysql数据库初始化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 登录到Mysql数据库</span></span><br><span class="line">mysql -h 127.0.0.1 -uroot -proot -A</span><br><span class="line"><span class="comment"># 创建数据库zabbix</span></span><br><span class="line">create database zabbix character <span class="built_in">set</span> utf8 collate utf8_bin;</span><br><span class="line">grant all privileges on zabbix.* to zabbix@<span class="string">&#x27;127.0.0.1&#x27;</span> identified by <span class="string">&#x27;19941127&#x27;</span>;</span><br><span class="line">flush privileges;</span><br><span class="line"><span class="built_in">set</span> names utf8;</span><br><span class="line"><span class="comment"># 在数据库zabbix中执行建表的sql脚本</span></span><br><span class="line">use zabbix;</span><br><span class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/src/zabbix-4.0.3/database/mysql/schema.sql</span><br><span class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/src/zabbix-4.0.3/database/mysql/data.sql</span><br><span class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/src/zabbix-4.0.3/database/mysql/images.sql</span><br></pre></td></tr></table></figure><h3 id="Zabbix-server的配置"><a href="#Zabbix-server的配置" class="headerlink" title="Zabbix server的配置"></a>Zabbix server的配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置文件的路径:/usr/local/zabbix/etc/zabbix_server.conf</span></span><br><span class="line">LogFile=/usr/<span class="built_in">local</span>/zabbix/zabbix_server.log</span><br><span class="line">DBHost=127.0.0.1</span><br><span class="line">DBName=zabbix</span><br><span class="line">DBUser=zabbix</span><br><span class="line">DBPassword=19941127</span><br><span class="line">DBPort=3306</span><br><span class="line">Timeout=30</span><br><span class="line">AlertScriptsPath=/usr/<span class="built_in">local</span>/zabbix/alertscripts</span><br><span class="line">ExternalScripts=/usr/<span class="built_in">local</span>/zabbix/externalscripts</span><br><span class="line">LogSlowQueries=3000</span><br></pre></td></tr></table></figure><h3 id="启动Zabbix-server"><a href="#启动Zabbix-server" class="headerlink" title="启动Zabbix server"></a>启动Zabbix server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更改所属权限</span></span><br><span class="line">chown zabbix:zabbix -R /usr/<span class="built_in">local</span>/zabbix/</span><br><span class="line"><span class="comment"># 启动zabbix server</span></span><br><span class="line">zabbix_server</span><br></pre></td></tr></table></figure><h3 id="验证zabbix-server的启动"><a href="#验证zabbix-server的启动" class="headerlink" title="验证zabbix server的启动"></a>验证zabbix server的启动</h3><p>1.进程</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206231420.png"></p><p>2.端口</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206231446.png"></p><p>3.日志</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206231512.png"></p><h3 id="Zabbix-Web的安装"><a href="#Zabbix-Web的安装" class="headerlink" title="Zabbix Web的安装"></a>Zabbix Web的安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在nginx的html下建立zabbix的web文件夹</span></span><br><span class="line">mkdir /usr/<span class="built_in">local</span>/nginx/html/zabbix</span><br><span class="line"><span class="comment"># 从zabbix目录拷贝web页面到nginx下</span></span><br><span class="line">cp -a /usr/<span class="built_in">local</span>/src/zabbix-4.0.3/frontends/php/* /usr/<span class="built_in">local</span>/nginx/html/zabbix/</span><br></pre></td></tr></table></figure><h3 id="Zabbix-Web初始化"><a href="#Zabbix-Web初始化" class="headerlink" title="Zabbix Web初始化"></a>Zabbix Web初始化</h3><p>访问：<a href="http://192.168.0.98/zabbix/">http://192.168.0.98/zabbix/</a></p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206231639.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置文件的路径:vi /usr/local/php/etc/php.ini</span></span><br><span class="line">post_max_size = 32M</span><br><span class="line">max_execution_time = 350</span><br><span class="line">max_input_time = 350</span><br><span class="line">date.timezone = Asia/Shanghai</span><br><span class="line">always_populate_raw_post_data = -1</span><br></pre></td></tr></table></figure><p>修改php.ini配置文件后，重启php-fpm.service</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206231727.png"></p><h3 id="登录Zabbix设置"><a href="#登录Zabbix设置" class="headerlink" title="登录Zabbix设置"></a>登录Zabbix设置</h3><p>1.默认用户名和密码：Admin zabbix<br>2.禁用Zabbix server主机的监控</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206231816.png"></p><p>3.禁用guest用户</p><p>说明：zabbix底层是通过禁用用户组来实现禁用用户的</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206231851.png"></p><p>4.更改Admin的密码，改成自己想要的密码</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206231916.png"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;006-Zabbix4-0版本编译安装&quot;&gt;&lt;a href=&quot;#006-Zabbix4-0版本编译安装&quot; class=&quot;headerlink&quot; title=&quot;006-Zabbix4.0版本编译安装&quot;&gt;&lt;/a&gt;006-Zabbix4.0版本编译安装&lt;/h1&gt;&lt;h2 id=&quot;正文&quot;&gt;&lt;a href=&quot;#正文&quot; class=&quot;headerlink&quot; title=&quot;正文&quot;&gt;&lt;/a&gt;&lt;strong&gt;正文&lt;/strong&gt;&lt;/h2&gt;&lt;h3 id=&quot;Zabbix源码编译安装&quot;&gt;&lt;a href=&quot;#Zabbix源码编译安装&quot; class=&quot;headerlink&quot; title=&quot;Zabbix源码编译安装&quot;&gt;&lt;/a&gt;Zabbix源码编译安装&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# zabbix的一些依赖包安装&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install -y libevent-devel wget tar gcc gcc-c++ make net-snmp-devel libxml2-devel libcurl-devel&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 创建启动进程的用户zabbix&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;useradd -s /sbin/nologin zabbix&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# zaibbx的tar下载&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/src/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget https://nchc.dl.sourceforge.net/project/zabbix/ZABBIX Latest Stable/4.0.3/zabbix-4.0.3.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 解压zabbix的tar包&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -zxvf zabbix-4.0.3.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; zabbix-4.0.3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# zabbix编译安装&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure --prefix=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/zabbix --enable-server --enable-agent --with-mysql=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/mysql/bin/mysql_config --with-net-snmp --with-libcurl --with-libxml2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;Zabbix编译参数说明&quot;&gt;&lt;a href=&quot;#Zabbix编译参数说明&quot; class=&quot;headerlink&quot; title=&quot;Zabbix编译参数说明&quot;&gt;&lt;/a&gt;Zabbix编译参数说明&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;--prefix 指定安装的目录&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--enable-server 安装zabbix-server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--enable-agent 安装zabbix-agent&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--with-mysql 用mysql来进行存储&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Linux运维" scheme="https://www.chenshengkai.com/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="Zabbix" scheme="https://www.chenshengkai.com/tags/Zabbix/"/>
    
  </entry>
  
  <entry>
    <title>LNMP环境连接Mysql测试</title>
    <link href="https://www.chenshengkai.com/2020/12/06/LNMP%E7%8E%AF%E5%A2%83%E8%BF%9E%E6%8E%A5Mysql%E6%B5%8B%E8%AF%95/"/>
    <id>https://www.chenshengkai.com/2020/12/06/LNMP%E7%8E%AF%E5%A2%83%E8%BF%9E%E6%8E%A5Mysql%E6%B5%8B%E8%AF%95/</id>
    <published>2020-12-06T14:52:42.000Z</published>
    <updated>2020-12-06T15:01:20.357Z</updated>
    
    <content type="html"><![CDATA[<h1 id="005-LNMP环境连接Mysql测试"><a href="#005-LNMP环境连接Mysql测试" class="headerlink" title="005-LNMP环境连接Mysql测试"></a>005-LNMP环境连接Mysql测试</h1><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a><strong>背景介绍</strong></h2><p>用户通过浏览器访问Nginx -&gt; html下的mysql.php文件，去连接Mysql数据库的一个测试</p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a><strong>正文</strong></h2><h3 id="LNMP服务检查"><a href="#LNMP服务检查" class="headerlink" title="LNMP服务检查"></a>LNMP服务检查</h3><p>检查确保Linux、nginx、php-fpm、mysql的服务都是正常启动的</p><h3 id="Mysql测试代码编写"><a href="#Mysql测试代码编写" class="headerlink" title="Mysql测试代码编写"></a>Mysql测试代码编写</h3><p>这里要说明一下，PHP5和PHP7连接Mysql的区别还是挺大的，不要翻车了。</p><p>PHP5使用mysql_connect函数来进行Mysql数据库的连接操作。</p><p>PHP7已经摒弃了这个函数，改成了mysqli_connect()函数，面向对象的写法：</p><p>变量名 = new mysqli(主机地址，用户名，密码，数据库名)；</p><p>下面是测试代码mysql.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$servername</span> = <span class="string">&quot;192.168.0.99&quot;</span>;</span><br><span class="line"><span class="variable">$username</span> = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="variable">$password</span> = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line"><span class="variable">$conn</span> = <span class="keyword">new</span> mysqli(<span class="variable">$servername</span>, <span class="variable">$username</span>, <span class="variable">$password</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 检测连接</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$conn</span>-&gt;connect_error) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;连接失败: &quot;</span> . <span class="variable">$conn</span>-&gt;connect_error);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;连接成功&quot;</span>;</span><br><span class="line">   phpinfo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="Mysql连接结果验证"><a href="#Mysql连接结果验证" class="headerlink" title="Mysql连接结果验证"></a>Mysql连接结果验证</h3><p>1.连接成功的界面</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206225701.png"></p><p>2.连接失败的界面</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206225734.png"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;005-LNMP环境连接Mysql测试&quot;&gt;&lt;a href=&quot;#005-LNMP环境连接Mysql测试&quot; class=&quot;headerlink&quot; title=&quot;005-LNMP环境连接Mysql测试&quot;&gt;&lt;/a&gt;005-LNMP环境连接Mysql测试&lt;/h1&gt;&lt;h2 id=&quot;背景介绍&quot;&gt;&lt;a href=&quot;#背景介绍&quot; class=&quot;headerlink&quot; title=&quot;背景介绍&quot;&gt;&lt;/a&gt;&lt;strong&gt;背景介绍&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;用户通过浏览器访问Nginx -&amp;gt; html下的mysql.php文件，去连接Mysql数据库的一个测试&lt;/p&gt;
&lt;h2 id=&quot;正文&quot;&gt;&lt;a href=&quot;#正文&quot; class=&quot;headerlink&quot; title=&quot;正文&quot;&gt;&lt;/a&gt;&lt;strong&gt;正文&lt;/strong&gt;&lt;/h2&gt;&lt;h3 id=&quot;LNMP服务检查&quot;&gt;&lt;a href=&quot;#LNMP服务检查&quot; class=&quot;headerlink&quot; title=&quot;LNMP服务检查&quot;&gt;&lt;/a&gt;LNMP服务检查&lt;/h3&gt;&lt;p&gt;检查确保Linux、nginx、php-fpm、mysql的服务都是正常启动的&lt;/p&gt;
&lt;h3 id=&quot;Mysql测试代码编写&quot;&gt;&lt;a href=&quot;#Mysql测试代码编写&quot; class=&quot;headerlink&quot; title=&quot;Mysql测试代码编写&quot;&gt;&lt;/a&gt;Mysql测试代码编写&lt;/h3&gt;&lt;p&gt;这里要说明一下，PHP5和PHP7连接Mysql的区别还是挺大的，不要翻车了。&lt;/p&gt;
&lt;p&gt;PHP5使用mysql_connect函数来进行Mysql数据库的连接操作。&lt;/p&gt;
&lt;p&gt;PHP7已经摒弃了这个函数，改成了mysqli_connect()函数，面向对象的写法：&lt;/p&gt;
&lt;p&gt;变量名 = new mysqli(主机地址，用户名，密码，数据库名)；&lt;/p&gt;
&lt;p&gt;下面是测试代码mysql.php&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$servername&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&amp;quot;192.168.0.99&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$username&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&amp;quot;root&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$password&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&amp;quot;root&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 创建连接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; mysqli(&lt;span class=&quot;variable&quot;&gt;$servername&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$username&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$password&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 检测连接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt;-&amp;gt;connect_error) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;die&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;连接失败: &amp;quot;&lt;/span&gt; . &lt;span class=&quot;variable&quot;&gt;$conn&lt;/span&gt;-&amp;gt;connect_error);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;连接成功&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   phpinfo();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Linux运维" scheme="https://www.chenshengkai.com/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="LNMP" scheme="https://www.chenshengkai.com/tags/LNMP/"/>
    
  </entry>
  
  <entry>
    <title>LNMP之Mysql源码编译安装</title>
    <link href="https://www.chenshengkai.com/2020/12/06/LNMP%E4%B9%8BMysql%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/"/>
    <id>https://www.chenshengkai.com/2020/12/06/LNMP%E4%B9%8BMysql%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/</id>
    <published>2020-12-06T14:23:10.000Z</published>
    <updated>2020-12-06T14:44:50.543Z</updated>
    
    <content type="html"><![CDATA[<h1 id="004-LNMP之Mysql源码编译安装"><a href="#004-LNMP之Mysql源码编译安装" class="headerlink" title="004-LNMP之Mysql源码编译安装"></a>004-LNMP之Mysql源码编译安装</h1><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a><strong>正文</strong></h2><p>搜狐镜像源：<a href="http://mirrors.sohu.com/">http://mirrors.sohu.com/</a> （推荐，国内源下载速度嗖嗖的）</p><p>这里有很多常用的镜像，Mysql的源码包也在里面。</p><h3 id="Mysql数据库的一些依赖包"><a href="#Mysql数据库的一些依赖包" class="headerlink" title="Mysql数据库的一些依赖包"></a>Mysql数据库的一些依赖包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc gcc-c++ make tar openssl openssl-devel cmake ncurses ncurses-devel</span><br></pre></td></tr></table></figure><h3 id="Mysql的编译安装"><a href="#Mysql的编译安装" class="headerlink" title="Mysql的编译安装"></a>Mysql的编译安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建mysql用户去启动数据库进程</span></span><br><span class="line">useradd -s /sbin/nologin mysql</span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src</span><br><span class="line">tar -zxvf mysql-5.6.39.tar.gz</span><br><span class="line"><span class="built_in">cd</span> mysql-5.6.39</span><br><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr/<span class="built_in">local</span>/mysql -DMYSQL_DATADIR=/data/mysql -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_EXTRA_CHARSETS:STRING=all -DWITH_DEBUG=0 -DWITH_SSL=yes -DWITH_READLINE=1 -DENABLED_LOCAL_INFILE=1</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">cp /usr/<span class="built_in">local</span>/src/mysql-5.6.39/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line">chmod a+x /etc/init.d/mysqld</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="编译参数说明"><a href="#编译参数说明" class="headerlink" title="编译参数说明"></a>编译参数说明</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定Mysql的安装目录</span></span><br><span class="line">CMACK_INSTALL_PREFIX</span><br><span class="line"><span class="comment"># 指定Mysql的数据目录</span></span><br><span class="line">MYSQL_DATADIR</span><br></pre></td></tr></table></figure><h3 id="Mysql环境变量配置"><a href="#Mysql环境变量配置" class="headerlink" title="Mysql环境变量配置"></a>Mysql环境变量配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/mysql/bin/</span><br><span class="line"><span class="comment"># 将环境变量追加到 /etc/profile</span></span><br><span class="line"><span class="built_in">source</span> /ect/profile</span><br><span class="line"><span class="comment"># 查看环境变量是否生效</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><h3 id="Mysql的启动步骤"><a href="#Mysql的启动步骤" class="headerlink" title="Mysql的启动步骤"></a>Mysql的启动步骤</h3><p>1.更新配置</p><p>2.数据库初始化</p><p>3.启动数据库</p><h3 id="更新Mysql配置"><a href="#更新Mysql配置" class="headerlink" title="更新Mysql配置"></a>更新Mysql配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置路径  /etc/my.cnf</span></span><br><span class="line">[mysqld]</span><br><span class="line">bind-address=0.0.0.0</span><br><span class="line">port=3306</span><br><span class="line">datadir=/data/mysql</span><br><span class="line">user=mysql</span><br><span class="line">skip-name-resolve</span><br><span class="line">long_query_time=2</span><br><span class="line">slow_query_log_file=/data/mysql/mysql-slow.log</span><br><span class="line">expire_logs_days=2</span><br><span class="line">innodb_flush_log_at_trx_commit=2</span><br><span class="line">log_warnings=1</span><br><span class="line">max_allowed_packet=512M</span><br><span class="line">connect_timeout=120</span><br><span class="line">[mysqld_safe]</span><br><span class="line">log_error=/data/mysql/mysqld.log</span><br><span class="line">pid-file=/data/mysqld/mysqld.pid</span><br></pre></td></tr></table></figure><h3 id="Mysql数据库初始化"><a href="#Mysql数据库初始化" class="headerlink" title="Mysql数据库初始化"></a>Mysql数据库初始化</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -pv /data/mysql</span><br><span class="line">chown -R mysql:mysql /usr/<span class="built_in">local</span>/mysql /data/mysql/</span><br><span class="line">yum install -y perl-Module-Install</span><br><span class="line">/usr/<span class="built_in">local</span>/mysql/scripts/mysql_install_db --basedir=/usr/<span class="built_in">local</span>/mysql --user=mysql --datadir=/data/mysql/</span><br></pre></td></tr></table></figure><h3 id="使用systemctl管理mysqld"><a href="#使用systemctl管理mysqld" class="headerlink" title="使用systemctl管理mysqld"></a>使用systemctl管理mysqld</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置文件的路径  /usr/lib/systemd/systemd/mysqld.service</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=mysqld</span><br><span class="line">After=network.target</span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/etc/init.d/mysqld start</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><h3 id="启动Mysql服务器"><a href="#启动Mysql服务器" class="headerlink" title="启动Mysql服务器"></a>启动Mysql服务器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld</span><br></pre></td></tr></table></figure><h3 id="验证Mysql是否启动"><a href="#验证Mysql是否启动" class="headerlink" title="验证Mysql是否启动"></a>验证Mysql是否启动</h3><p>1.查看进程 ps -ef | grep mysql</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206222916.png"></p><p> 2.查看监听 netstat -tunlp | grep mysql</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206222946.png"></p><p>3.查看日志 cat /data/mysql/mysqld.log</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206223018.png"></p><h3 id="Mysql的安全方式"><a href="#Mysql的安全方式" class="headerlink" title="Mysql的安全方式"></a>Mysql的安全方式</h3><p>1.mysql能限制ip访问、访问需要用户名密码、mysql权限还能细分<br>2.默认让127.0.0.1访问，用户名root，不需要密码<br>3.mysql -uroot -h 127.0.0.1 -A</p><h3 id="Mysql添加密码"><a href="#Mysql添加密码" class="headerlink" title="Mysql添加密码"></a>Mysql添加密码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 给mysql数据库root用户添加密码root</span></span><br><span class="line">mysqladmin -h 127.0.0.1 -uroot password <span class="string">&#x27;root&#x27;</span></span><br><span class="line"><span class="comment"># 用root密码验证登录</span></span><br><span class="line">mysql -h 127.0.0.1 -uroot -proot -A</span><br></pre></td></tr></table></figure><h3 id="Mysql授权某ip登录并指定用户名"><a href="#Mysql授权某ip登录并指定用户名" class="headerlink" title="Mysql授权某ip登录并指定用户名"></a>Mysql授权某ip登录并指定用户名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 添加192.168.0.X段的ip允许网络访问Mysql数据库</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;192.168.0.%&#39; IDENTIFIED BY &#39;root&#39; WITH GRANT OPTION;</span><br><span class="line"># 刷新mysql权限的相关表</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><h3 id="网络登录Mysql"><a href="#网络登录Mysql" class="headerlink" title="网络登录Mysql"></a>网络登录Mysql</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Mysql数据库服务器地址:192.168.4.99</span></span><br><span class="line"><span class="comment"># 我用另外一台linux机器:192.168.4.98 网络登录Mysql数据库访问</span></span><br><span class="line">mysql -h 192.168.4.99 -uroot -proot -A</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206223324.png"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;004-LNMP之Mysql源码编译安装&quot;&gt;&lt;a href=&quot;#004-LNMP之Mysql源码编译安装&quot; class=&quot;headerlink&quot; title=&quot;004-LNMP之Mysql源码编译安装&quot;&gt;&lt;/a&gt;004-LNMP之Mysql源码编译安装&lt;/h1&gt;&lt;h2 id=&quot;正文&quot;&gt;&lt;a href=&quot;#正文&quot; class=&quot;headerlink&quot; title=&quot;正文&quot;&gt;&lt;/a&gt;&lt;strong&gt;正文&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;搜狐镜像源：&lt;a href=&quot;http://mirrors.sohu.com/&quot;&gt;http://mirrors.sohu.com/&lt;/a&gt; （推荐，国内源下载速度嗖嗖的）&lt;/p&gt;
&lt;p&gt;这里有很多常用的镜像，Mysql的源码包也在里面。&lt;/p&gt;
&lt;h3 id=&quot;Mysql数据库的一些依赖包&quot;&gt;&lt;a href=&quot;#Mysql数据库的一些依赖包&quot; class=&quot;headerlink&quot; title=&quot;Mysql数据库的一些依赖包&quot;&gt;&lt;/a&gt;Mysql数据库的一些依赖包&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum -y install gcc gcc-c++ make tar openssl openssl-devel cmake ncurses ncurses-devel&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;Mysql的编译安装&quot;&gt;&lt;a href=&quot;#Mysql的编译安装&quot; class=&quot;headerlink&quot; title=&quot;Mysql的编译安装&quot;&gt;&lt;/a&gt;Mysql的编译安装&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 创建mysql用户去启动数据库进程&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;useradd -s /sbin/nologin mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/src&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -zxvf mysql-5.6.39.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; mysql-5.6.39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cmake -DCMAKE_INSTALL_PREFIX=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/mysql -DMYSQL_DATADIR=/data/mysql -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_EXTRA_CHARSETS:STRING=all -DWITH_DEBUG=0 -DWITH_SSL=yes -DWITH_READLINE=1 -DENABLED_LOCAL_INFILE=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/src/mysql-5.6.39/support-files/mysql.server /etc/init.d/mysqld&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chmod a+x /etc/init.d/mysqld&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Linux运维" scheme="https://www.chenshengkai.com/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="LNMP" scheme="https://www.chenshengkai.com/tags/LNMP/"/>
    
  </entry>
  
  <entry>
    <title>LNMP之PHP环境搭建</title>
    <link href="https://www.chenshengkai.com/2020/12/06/LNMP%E4%B9%8BPHP%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <id>https://www.chenshengkai.com/2020/12/06/LNMP%E4%B9%8BPHP%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</id>
    <published>2020-12-06T14:08:50.000Z</published>
    <updated>2020-12-06T14:52:25.583Z</updated>
    
    <content type="html"><![CDATA[<h1 id="003-LNMP之PHP环境搭建"><a href="#003-LNMP之PHP环境搭建" class="headerlink" title="003-LNMP之PHP环境搭建"></a>003-LNMP之PHP环境搭建</h1><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a><strong>正文</strong></h2><p>php官网：<a href="https://www.php.net/">https://www.php.net/</a></p><p>搜狐镜像源：<a href="http://mirrors.sohu.com/">http://mirrors.sohu.com/</a> （推荐，国内源下载速度嗖嗖的）</p><h3 id="php编译安装前解决依赖包"><a href="#php编译安装前解决依赖包" class="headerlink" title="php编译安装前解决依赖包"></a>php编译安装前解决依赖包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line">yum -y install gcc gcc-c++ make pcre pcre-devel zlib zlib-devel openssl openssl-devel libxml2 libxml2-devel libcurl libcurl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel openldap openldap-devel libmcrypt libmcrypt-devel sqlite sqlite-devel oniguruma-devel oniguruma</span><br></pre></td></tr></table></figure><h3 id="源码编译安装php"><a href="#源码编译安装php" class="headerlink" title="源码编译安装php"></a>源码编译安装php</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/php --with-config-file-path=/usr/<span class="built_in">local</span>/php/etc --enable-ctype --with-mysql=mysqlnd --with-mysqli=mysqlnd --with-freetype-dir --with-jpeg-dir --with-png-dir --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-ldap-sasl --with-xmlrpc --enable-zip --enable-soap --with-gettext --enable-fpm</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment"># 在/usr/local/php/etc目录下，默认是没有php.ini这个配置文件的，需要拷贝一个过去</span></span><br><span class="line"><span class="comment"># 拷贝的文件路径/usr/local/src/php-7.4.7</span></span><br><span class="line">cp /usr/<span class="built_in">local</span>/src/php-7.4.7/php.ini-production /usr/<span class="built_in">local</span>/php/etc/php.ini</span><br></pre></td></tr></table></figure><a id="more"></a>he<h3 id="php编译安装说明"><a href="#php编译安装说明" class="headerlink" title="php编译安装说明"></a>php编译安装说明</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--prefix 指定php的安装目录</span><br><span class="line">--with-config-file-path 指定php的配置文件位置</span><br><span class="line">--with-mysql 让php可以操作mysql</span><br><span class="line">--enable-fpm 主要是nginx要来调用php语言使得php-fpm</span><br></pre></td></tr></table></figure><h3 id="启动php-fpm"><a href="#启动php-fpm" class="headerlink" title="启动php-fpm"></a>启动php-fpm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 环境变量</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/php/sbin/:/usr/<span class="built_in">local</span>/php/bin/</span><br><span class="line"><span class="comment"># 检查配置文件</span></span><br><span class="line">php-fpm -t</span><br><span class="line"><span class="comment"># 使用默认配置文件</span></span><br><span class="line">mv /usr/<span class="built_in">local</span>/php/etc/php-fpm.conf.default /usr/<span class="built_in">local</span>/php/etc/php-fpm.conf</span><br><span class="line"><span class="comment"># 查看php-fpm的listen配置</span></span><br></pre></td></tr></table></figure><h3 id="验证php-fpm的启动"><a href="#验证php-fpm的启动" class="headerlink" title="验证php-fpm的启动"></a>验证php-fpm的启动</h3><p>1.进程</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206221352.png"></p><p>2.端口</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206221427.png"></p><p>3.日志</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206221506.png"></p><h3 id="使用systemctl管理php-fpm"><a href="#使用systemctl管理php-fpm" class="headerlink" title="使用systemctl管理php-fpm"></a>使用systemctl管理php-fpm</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建配置文件的路径</span></span><br><span class="line">vi /usr/lib/systemd/system/php-fpm.service</span><br><span class="line"><span class="comment"># 配置内容：</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=php-fpm</span><br><span class="line">After=network.target</span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/<span class="built_in">local</span>/php/sbin/php-fpm</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><h3 id="nginx-php-fpm结合的配置"><a href="#nginx-php-fpm结合的配置" class="headerlink" title="nginx+php-fpm结合的配置"></a>nginx+php-fpm结合的配置</h3><p>测试页代码：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># test.php</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>nginx默认配置无法处理php程序，只会下载，需要改配置文件nginx.conf</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">            <span class="attribute">root</span>           html;</span><br><span class="line">            <span class="attribute">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">            <span class="attribute">fastcgi_index</span>  index.php;</span><br><span class="line">            <span class="comment"># 修改默认的/scripts为$document_root,去root-&gt;html下面找页面</span></span><br><span class="line">            <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span><br><span class="line">            <span class="attribute">include</span>        fastcgi_params;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h3 id="页面test-php访问测试"><a href="#页面test-php访问测试" class="headerlink" title="页面test.php访问测试"></a>页面test.php访问测试</h3><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206221756.png"></p><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a><strong>常见问题</strong></h2><h3 id="运行systemctl-start-php-fpm报错"><a href="#运行systemctl-start-php-fpm报错" class="headerlink" title="运行systemctl start php-fpm报错"></a>运行systemctl start php-fpm报错</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[30-Jun-2020 18:34:23] WARNING: Nothing matches the include pattern <span class="string">&#x27;/usr/local/php/etc/php-fpm.d/*.conf&#x27;</span> from /usr/<span class="built_in">local</span>/php/etc/php-fpm.conf at line 125.</span><br><span class="line">[30-Jun-2020 18:34:23] ERROR: No pool defined. at least one pool section must be specified <span class="keyword">in</span> config file</span><br><span class="line">[30-Jun-2020 18:34:23] ERROR: failed to post process the configuration</span><br><span class="line">[30-Jun-2020 18:34:23] ERROR: FPM initialization failed</span><br></pre></td></tr></table></figure><h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/php/etc/php-fpm.d/</span><br><span class="line">cp www.conf.default www.conf</span><br><span class="line">/usr/<span class="built_in">local</span>/php/sbin/php-fpm -t</span><br><span class="line"></span><br><span class="line">[30-Jun-2020 18:35:29] NOTICE: configuration file /usr/<span class="built_in">local</span>/php/etc/php-fpm.conf <span class="built_in">test</span> is successful</span><br><span class="line">[root@localhost php-fpm.d]systemctl start php-fpm</span><br><span class="line">Starting php-fpm  <span class="keyword">done</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;003-LNMP之PHP环境搭建&quot;&gt;&lt;a href=&quot;#003-LNMP之PHP环境搭建&quot; class=&quot;headerlink&quot; title=&quot;003-LNMP之PHP环境搭建&quot;&gt;&lt;/a&gt;003-LNMP之PHP环境搭建&lt;/h1&gt;&lt;h2 id=&quot;正文&quot;&gt;&lt;a href=&quot;#正文&quot; class=&quot;headerlink&quot; title=&quot;正文&quot;&gt;&lt;/a&gt;&lt;strong&gt;正文&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;php官网：&lt;a href=&quot;https://www.php.net/&quot;&gt;https://www.php.net/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;搜狐镜像源：&lt;a href=&quot;http://mirrors.sohu.com/&quot;&gt;http://mirrors.sohu.com/&lt;/a&gt; （推荐，国内源下载速度嗖嗖的）&lt;/p&gt;
&lt;h3 id=&quot;php编译安装前解决依赖包&quot;&gt;&lt;a href=&quot;#php编译安装前解决依赖包&quot; class=&quot;headerlink&quot; title=&quot;php编译安装前解决依赖包&quot;&gt;&lt;/a&gt;php编译安装前解决依赖包&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum -y install epel-release&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum -y install gcc gcc-c++ make pcre pcre-devel zlib zlib-devel openssl openssl-devel libxml2 libxml2-devel libcurl libcurl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel openldap openldap-devel libmcrypt libmcrypt-devel sqlite sqlite-devel oniguruma-devel oniguruma&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;源码编译安装php&quot;&gt;&lt;a href=&quot;#源码编译安装php&quot; class=&quot;headerlink&quot; title=&quot;源码编译安装php&quot;&gt;&lt;/a&gt;源码编译安装php&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;./configure --prefix=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/php --with-config-file-path=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/php/etc --enable-ctype --with-mysql=mysqlnd --with-mysqli=mysqlnd --with-freetype-dir --with-jpeg-dir --with-png-dir --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-ldap-sasl --with-xmlrpc --enable-zip --enable-soap --with-gettext --enable-fpm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 在/usr/local/php/etc目录下，默认是没有php.ini这个配置文件的，需要拷贝一个过去&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 拷贝的文件路径/usr/local/src/php-7.4.7&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/src/php-7.4.7/php.ini-production /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/php/etc/php.ini&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Linux运维" scheme="https://www.chenshengkai.com/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="LNMP" scheme="https://www.chenshengkai.com/tags/LNMP/"/>
    
  </entry>
  
  <entry>
    <title>LNMP之Nginx服务器搭建</title>
    <link href="https://www.chenshengkai.com/2020/12/06/LNMP%E4%B9%8BNginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/"/>
    <id>https://www.chenshengkai.com/2020/12/06/LNMP%E4%B9%8BNginx%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA/</id>
    <published>2020-12-06T13:53:11.000Z</published>
    <updated>2020-12-06T14:48:22.406Z</updated>
    
    <content type="html"><![CDATA[<h1 id="002-LNMP之Nginx服务器搭建"><a href="#002-LNMP之Nginx服务器搭建" class="headerlink" title="002-LNMP之Nginx服务器搭建"></a>002-LNMP之Nginx服务器搭建</h1><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><p><strong>常见Web服务器：</strong></p><p>1、Apache</p><p>2、Nginx</p><p>以上是常见的两种web服务器，这里我选择Nginx，因为安装和配置都比较简洁，功能也强大，满足日常的反向代理，负载均衡等功能。</p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="Nginx服务器的编译安装"><a href="#Nginx服务器的编译安装" class="headerlink" title="Nginx服务器的编译安装"></a><strong>Nginx服务器的编译安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先是安装Nginx所需要的一些依赖包</span></span><br><span class="line">yum install -y wget gcc gcc-c++ make pcre pcre-devel zlib zlib-devel openssl openssl-devel</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206215646.png"></p><p>这里不得不提一句：yum大法好呀，自己会去找依赖所需要的依赖，出现Complete就是完成了。</p><p>然后就是去Nginx官网下载源码包，进行编译安装的操作。</p><p>贴个Nginx下载的传送门：<a href="http://nginx.org/download/nginx-1.18.0.tar.gz">点我下载Nginx</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载路径我选择到 /usr/local/src</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src</span><br><span class="line">wget http://nginx.org/download/nginx-1.18.0.tar.gz</span><br><span class="line">tar -zxvf nginx-1.18.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> nginx-1.18.0</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/nginx</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="手动启动和关闭Nginx"><a href="#手动启动和关闭Nginx" class="headerlink" title="手动启动和关闭Nginx"></a><strong>手动启动和关闭Nginx</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置环境变量</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/nginx/sbin/</span><br><span class="line"><span class="comment"># 检查Nginx配置</span></span><br><span class="line">nginx -t</span><br><span class="line"><span class="comment"># 启动Nginx</span></span><br><span class="line">nginx</span><br><span class="line"><span class="comment"># 关闭Nginx</span></span><br><span class="line">nginx -s stop</span><br></pre></td></tr></table></figure><p>设置完系统环境变量后，记得source立即生效一下。</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206220007.png"></p><h3 id="验证Nginx是否安装成功"><a href="#验证Nginx是否安装成功" class="headerlink" title="验证Nginx是否安装成功"></a><strong>验证Nginx是否安装成功</strong></h3><p>1.查看进程</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206220051.png"></p><p> 2.查看监听端口</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206220118.png"></p><p> 3.nginx日志访问</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206220203.png"></p><p>4.浏览器访问</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206220247.png"></p><h3 id="使用systemctl管理Nginx"><a href="#使用systemctl管理Nginx" class="headerlink" title="使用systemctl管理Nginx"></a><strong>使用systemctl管理Nginx</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置路径</span></span><br><span class="line">/usr/lib/systemd/system/nginx.service</span><br><span class="line"><span class="comment"># 配置内容</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=nginx</span><br><span class="line">After=network.target</span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/<span class="built_in">local</span>/nginx/sbin/nginx</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p> 然后就可以用systemctl管理nginx服务了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动nginx服务</span></span><br><span class="line">systemctl start nginx</span><br><span class="line"><span class="comment"># 查看nginx服务状态</span></span><br><span class="line">systemctl status nginx</span><br><span class="line"><span class="comment"># 重启nginx服务</span></span><br><span class="line">sytemctl restart nginx</span><br><span class="line"><span class="comment"># 停止nginx服务</span></span><br><span class="line">systemctl stop nginx</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;002-LNMP之Nginx服务器搭建&quot;&gt;&lt;a href=&quot;#002-LNMP之Nginx服务器搭建&quot; class=&quot;headerlink&quot; title=&quot;002-LNMP之Nginx服务器搭建&quot;&gt;&lt;/a&gt;002-LNMP之Nginx服务器搭建&lt;/h1&gt;&lt;h2 id=&quot;背景介绍&quot;&gt;&lt;a href=&quot;#背景介绍&quot; class=&quot;headerlink&quot; title=&quot;背景介绍&quot;&gt;&lt;/a&gt;背景介绍&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;常见Web服务器：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、Apache&lt;/p&gt;
&lt;p&gt;2、Nginx&lt;/p&gt;
&lt;p&gt;以上是常见的两种web服务器，这里我选择Nginx，因为安装和配置都比较简洁，功能也强大，满足日常的反向代理，负载均衡等功能。&lt;/p&gt;
&lt;h2 id=&quot;正文&quot;&gt;&lt;a href=&quot;#正文&quot; class=&quot;headerlink&quot; title=&quot;正文&quot;&gt;&lt;/a&gt;正文&lt;/h2&gt;&lt;h3 id=&quot;Nginx服务器的编译安装&quot;&gt;&lt;a href=&quot;#Nginx服务器的编译安装&quot; class=&quot;headerlink&quot; title=&quot;Nginx服务器的编译安装&quot;&gt;&lt;/a&gt;&lt;strong&gt;Nginx服务器的编译安装&lt;/strong&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 首先是安装Nginx所需要的一些依赖包&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yum install -y wget gcc gcc-c++ make pcre pcre-devel zlib zlib-devel openssl openssl-devel&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206215646.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;这里不得不提一句：yum大法好呀，自己会去找依赖所需要的依赖，出现Complete就是完成了。&lt;/p&gt;
&lt;p&gt;然后就是去Nginx官网下载源码包，进行编译安装的操作。&lt;/p&gt;
&lt;p&gt;贴个Nginx下载的传送门：&lt;a href=&quot;http://nginx.org/download/nginx-1.18.0.tar.gz&quot;&gt;点我下载Nginx&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 下载路径我选择到 /usr/local/src&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/src&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget http://nginx.org/download/nginx-1.18.0.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -zxvf nginx-1.18.0.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; nginx-1.18.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure --prefix=/usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Linux运维" scheme="https://www.chenshengkai.com/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="LNMP" scheme="https://www.chenshengkai.com/tags/LNMP/"/>
    
  </entry>
  
  <entry>
    <title>Linux开机模式和网络设置</title>
    <link href="https://www.chenshengkai.com/2020/12/06/Linux%E5%BC%80%E6%9C%BA%E6%A8%A1%E5%BC%8F%E5%92%8C%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE/"/>
    <id>https://www.chenshengkai.com/2020/12/06/Linux%E5%BC%80%E6%9C%BA%E6%A8%A1%E5%BC%8F%E5%92%8C%E7%BD%91%E7%BB%9C%E8%AE%BE%E7%BD%AE/</id>
    <published>2020-12-06T13:30:40.000Z</published>
    <updated>2020-12-06T14:48:08.279Z</updated>
    
    <content type="html"><![CDATA[<h1 id="001-Linux开机模式和网络设置"><a href="#001-Linux开机模式和网络设置" class="headerlink" title="001-Linux开机模式和网络设置"></a>001-Linux开机模式和网络设置</h1><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><p>准备3台服务器（虚拟机环境），一台打算当做Web服务器（Nginx），另外2台备用。考虑到对物理机性能的占用，故采用命令行启动的模式。</p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="修改开机模式为命令模式"><a href="#修改开机模式为命令模式" class="headerlink" title="修改开机模式为命令模式"></a><strong>修改开机模式为命令模式</strong></h3><p>3台服务器分别取名为server001、server002、server003，都安装Centos7后，修改配置文件，开机到命令行模式。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/inittab  <span class="comment">#修改配置文件的路径 </span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206214018.png"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">multi-user.target  <span class="comment">#指的就是命令模式</span></span><br><span class="line">graphical.target  <span class="comment">#指的就是GUI模式</span></span><br></pre></td></tr></table></figure><p>修改完之后，reboot一下就能看到效果了。</p><a id="more"></a><h3 id="在命令模式下设置网络配置"><a href="#在命令模式下设置网络配置" class="headerlink" title="在命令模式下设置网络配置"></a><strong>在命令模式下设置网络配置</strong></h3><p>首先用ifconfig查看一下自己网卡的信息。</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206214206.png"></p><p>可以看到我的网卡名称为：eno16777736，另外一个是回环地址的网卡，不用去管。</p><p>然后去修改这个网卡配置的信息。</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206214249.png"></p><p>修改内容如下：</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206214322.png"></p><p> 然后route-n查看一下路由信息：</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206214500.png"></p><p> 同样方法设置server001和server003,然后检查一下3台服务器的网络连接就行了。</p><p><img src="https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206214538.png"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;001-Linux开机模式和网络设置&quot;&gt;&lt;a href=&quot;#001-Linux开机模式和网络设置&quot; class=&quot;headerlink&quot; title=&quot;001-Linux开机模式和网络设置&quot;&gt;&lt;/a&gt;001-Linux开机模式和网络设置&lt;/h1&gt;&lt;h2 id=&quot;背景介绍&quot;&gt;&lt;a href=&quot;#背景介绍&quot; class=&quot;headerlink&quot; title=&quot;背景介绍&quot;&gt;&lt;/a&gt;背景介绍&lt;/h2&gt;&lt;p&gt;准备3台服务器（虚拟机环境），一台打算当做Web服务器（Nginx），另外2台备用。考虑到对物理机性能的占用，故采用命令行启动的模式。&lt;/p&gt;
&lt;h2 id=&quot;正文&quot;&gt;&lt;a href=&quot;#正文&quot; class=&quot;headerlink&quot; title=&quot;正文&quot;&gt;&lt;/a&gt;正文&lt;/h2&gt;&lt;h3 id=&quot;修改开机模式为命令模式&quot;&gt;&lt;a href=&quot;#修改开机模式为命令模式&quot; class=&quot;headerlink&quot; title=&quot;修改开机模式为命令模式&quot;&gt;&lt;/a&gt;&lt;strong&gt;修改开机模式为命令模式&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;3台服务器分别取名为server001、server002、server003，都安装Centos7后，修改配置文件，开机到命令行模式。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/etc/inittab  &lt;span class=&quot;comment&quot;&gt;#修改配置文件的路径 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/charseki1994/images/img/20201206214018.png&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;multi-user.target  &lt;span class=&quot;comment&quot;&gt;#指的就是命令模式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;graphical.target  &lt;span class=&quot;comment&quot;&gt;#指的就是GUI模式&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;修改完之后，reboot一下就能看到效果了。&lt;/p&gt;</summary>
    
    
    
    <category term="Linux运维" scheme="https://www.chenshengkai.com/categories/Linux%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="LNMP" scheme="https://www.chenshengkai.com/tags/LNMP/"/>
    
  </entry>
  
  <entry>
    <title>Encrypt_Demo</title>
    <link href="https://www.chenshengkai.com/2020/11/29/Encrypt_Demo/"/>
    <id>https://www.chenshengkai.com/2020/11/29/Encrypt_Demo/</id>
    <published>2020-11-29T01:25:46.057Z</published>
    <updated>2020-12-06T13:33:40.519Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="密码错误,请重新输入！" data-whm="文章不能被校验,不过您还是能看看解密后的内容！"><div class="hbe-input-container"><input type="password" id="hbePass" placeholder="您好,请在下方输入密码！" /><label>您好,请在下方输入密码！</label><div class="bottom-line"></div></div><script id="hbeData" type="hbeData" data-hmacdigest="19c06c3d70add7aa0c74b425e5af2935f9176dfb0934fb3d9d1c5ead7337e7cb">f0e260aa95ce3ceffcb2b4f9bd98f3f35189ff6848982a804d96cce2bf6aba109b6e9673bb192ee04d918b10de44b772208572ab4bd84e5baf09905fa8d8eec1229b9bd21eb165cc2371b188aec6d6e4940da0597c62a830892a92f05db74a9d1537e7db0c82eba8f1ce1e769bd062aa65a5221b524fbed9d65ded3b659c363d9a30130d01be9f5c3891bee6972c5d9614d13320b7212dc18691a8decc461a4381e776f1523ebba2aaf429e5c851a1e3962014f99294da2940c9c42cc0df5e83104a11712d78e4a431d42d0b933dc8159259545e24018dafeb2402d57e39a4797a98795b985224dcaf3599ab90222f2b12c3e70378795a422a7011e03a284695084eee849f4e217724b884e0f318f296d116842ee5189b54590870d388b867481bb30446bab709f725f1cdc287f6b4367a5b2362e859e9a0e57188fbe9110fb42c62c360b173ddcd63de733fc7cf0820c1b857113570710fd7c3492b1daf1207b2c4bc1c0e9c2f9d7482346de38d5ab4c2f4140f9bf8a046e561ef0c931f0818ee2cb9d6789ae2fd17ceebd072d72100a901943d7ceaa5422df02f3362d1124ae52a975395aca8318a23dac8681c2e08</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">这篇文章已被加密,请输入密码后查看！</summary>
    
    
    
    
    <category term="Encrypted" scheme="https://www.chenshengkai.com/tags/Encrypted/"/>
    
  </entry>
  
</feed>
